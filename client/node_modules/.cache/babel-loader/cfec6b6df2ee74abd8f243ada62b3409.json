{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/Redux/Projects/redux-app-main-copy/client/src/components/taskItem/taskItem.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { inputDelete, updateText, checkUpdate } from \"../../redux/actions\";\nimport './taskItem.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction TaskItem(props) {\n  _s();\n\n  let [mode, setMode] = useState(false);\n  const [input, setInput] = useState('');\n  const {\n    text,\n    _id,\n    done\n  } = props;\n  const dispatch = useDispatch(); // удаляем таску\n\n  const handleDelete = async e => {\n    e.preventDefault();\n    dispatch(inputDelete(_id));\n  }; // ввод инпута\n\n\n  const handleInput = e => {\n    setInput(e.target.value = e.target.value.replace(/ +/g, ' '));\n  }; // обновление чека и отправка на сервер\n\n\n  const handleCheck = e => {\n    e.preventDefault();\n\n    try {\n      dispatch(checkUpdate(_id, !done));\n    } catch (error) {\n      console.log(error);\n    }\n  }; // взаимодействие с css\n\n\n  const removeAttribute = e => {\n    e.currentTarget.removeAttribute(\"readonly\", \"true\");\n  };\n\n  const onBlur = e => {\n    e.preventDefault();\n    handleUpdateInput(e);\n    setMode(false);\n    e.currentTarget.classList.remove(\"to-do__text-active\");\n  };\n\n  const onFocus = e => {\n    handleUpdateInput(e);\n    e.currentTarget.classList.add(\"to-do__text-active\");\n  };\n\n  const handleKeyDown = e => {\n    if (e.keyCode === 13) {\n      handleUpdateInput(e);\n      setMode(false);\n      e.currentTarget.setAttribute(\"readonly\", \"true\");\n      e.currentTarget.classList.remove(\"to-do__text-active\");\n    }\n  };\n\n  const modeUpdateTrue = e => {\n    e.preventDefault();\n    setMode(true);\n  };\n\n  const handleUpdateInput = async e => {\n    e.preventDefault();\n\n    if (!input || input === \" \") {\n      setInput(e.target.value = props.text);\n    } else {\n      try {\n        setInput(text);\n      } catch (error) {\n        console.log(error);\n      }\n\n      dispatch(updateText(input, _id, done));\n    }\n  };\n\n  let classDone, classCheck, classActive;\n\n  if (done) {\n    classDone = \"to-do__text to-do__done\";\n    classCheck = \"to-do__checkbox to-do__checkbox-actve\";\n    classActive = \"to-do__checkbox-check to-do__checkbox-check-active\";\n  } else {\n    classDone = \"to-do__text\";\n    classCheck = \"to-do__checkbox\";\n    classActive = \"to-do__checkbox-check\";\n  }\n\n  useEffect(() => {\n    if (text) {\n      setInput(task);\n    }\n  }, [task]);\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"to-do__list-li\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: classCheck,\n      htmlFor: \"checkItem\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"checkItem\",\n      className: \"to-do__checkbox-input\",\n      onClick: handleCheck,\n      type: \"checkbox\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      className: classActive,\n      src: \"/img/check.svg\",\n      alt: \"check\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"div\",\n      children: mode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          autoFocus: true,\n          className: classDone,\n          onBlur: onBlur,\n          onFocus: onFocus,\n          onKeyDown: handleKeyDown,\n          onDoubleClick: removeAttribute,\n          onChange: handleInput,\n          defaultValue: task,\n          id: _id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          type: \"text\",\n          disabled: true,\n          className: classDone,\n          onDoubleClick: modeUpdateTrue,\n          id: _id,\n          children: task\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"to-do__checkbox-btn\",\n          onClick: handleDelete,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"to-do__checkbox-cross\",\n            src: \"/img/cross.svg\",\n            alt: \"delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n}\n\n_s(TaskItem, \"00R5KN+fGRnH8mthQt3a7D6HkdE=\", false, function () {\n  return [useDispatch];\n});\n\n_c = TaskItem;\nexport default TaskItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"TaskItem\");","map":{"version":3,"sources":["/home/user/Desktop/Redux/Projects/redux-app-main-copy/client/src/components/taskItem/taskItem.jsx"],"names":["useState","useEffect","useDispatch","inputDelete","updateText","checkUpdate","TaskItem","props","mode","setMode","input","setInput","text","_id","done","dispatch","handleDelete","e","preventDefault","handleInput","target","value","replace","handleCheck","error","console","log","removeAttribute","currentTarget","onBlur","handleUpdateInput","classList","remove","onFocus","add","handleKeyDown","keyCode","setAttribute","modeUpdateTrue","classDone","classCheck","classActive","task"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { inputDelete, updateText, checkUpdate } from \"../../redux/actions\";\nimport './taskItem.css';\n\n\n\n\nfunction TaskItem(props) {\n    let [mode, setMode] = useState(false);\n    const [input, setInput] = useState('')\n    const { text, _id, done } = props\n    const dispatch = useDispatch();  \n\n    // удаляем таску\n    const handleDelete = async (e) => {\n        e.preventDefault();\n        dispatch(inputDelete(_id))\n    };\n\n    // ввод инпута\n    const handleInput = (e) => { setInput(e.target.value = e.target.value.replace(/ +/g, ' ')) }\n\n    // обновление чека и отправка на сервер\n    const handleCheck = (e) => {\n        e.preventDefault();\n        try {\n            dispatch(checkUpdate(_id, !done));\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    // взаимодействие с css\n    const removeAttribute = (e) => { \n        e.currentTarget.removeAttribute(\"readonly\", \"true\") \n    }\n    const onBlur = (e) => { \n        e.preventDefault();\n        handleUpdateInput(e)\n        setMode(false)\n        e.currentTarget.classList.remove(\"to-do__text-active\")\n    }\n    const onFocus = (e) => {\n        handleUpdateInput(e)\n        e.currentTarget.classList.add(\"to-do__text-active\")\n    }\n\n    const handleKeyDown = (e) => {\n        if (e.keyCode === 13) {\n            handleUpdateInput(e)\n            setMode(false)\n            e.currentTarget.setAttribute(\"readonly\", \"true\")\n            e.currentTarget.classList.remove(\"to-do__text-active\");\n        }\n    }\n    const modeUpdateTrue = (e) => {\n        e.preventDefault();\n        setMode(true)\n    }\n\n    const handleUpdateInput = async (e) => {\n        e.preventDefault();\n        if (!input || input === \" \") {\n            setInput(e.target.value = props.text);\n        }\n        else {\n            try {\n                setInput(text);\n            } catch (error) {\n                console.log(error);\n            }\n            dispatch(updateText(input, _id, done))\n        }\n    };\n\n    let classDone, classCheck, classActive;\n    if (done) {\n        classDone = \"to-do__text to-do__done\";\n        classCheck = \"to-do__checkbox to-do__checkbox-actve\";\n        classActive = \"to-do__checkbox-check to-do__checkbox-check-active\";\n    } else {\n        classDone = \"to-do__text\";\n        classCheck = \"to-do__checkbox\";\n        classActive = \"to-do__checkbox-check\";\n    }\n\n    useEffect(() => {\n        if (text) {\n            setInput(task)\n        }\n    }, [task])\n\n    return(\n        <li className=\"to-do__list-li\">\n            <label\n                className={classCheck}\n                htmlFor=\"checkItem\">\n            </label>\n            <input\n                id=\"checkItem\"\n                className=\"to-do__checkbox-input\"\n                onClick={handleCheck}\n                type=\"checkbox\"\n            />\n            <img\n                className={classActive}\n                src=\"/img/check.svg\"\n                alt=\"check\"\n            />\n            <div className=\"div\">\n            {mode ? \n                <>  \n                <input\n                    type=\"text\"\n                    autoFocus\n                    className={classDone}\n                    onBlur={onBlur}\n                    onFocus={onFocus}\n                    onKeyDown={handleKeyDown}                \n                    onDoubleClick={removeAttribute}\n                    onChange={handleInput}\n                    defaultValue={task}\n                    id={_id}  \n                /> \n                </> \n                :\n                <>\n                <div\n                    type=\"text\"\n                    disabled \n                    className={classDone}\n                    onDoubleClick={modeUpdateTrue}\n                    id={_id}\n                >\n                    {task}\n                </div> \n                <button className=\"to-do__checkbox-btn\" onClick={handleDelete}>\n                    <img className=\"to-do__checkbox-cross\" src=\"/img/cross.svg\" alt=\"delete\"/>\n                </button>\n                </>}              \n            </div> \n        </li>\n        )\n}\n\n\n\nexport default TaskItem;\n"]},"metadata":{},"sourceType":"module"}